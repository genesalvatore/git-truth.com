[build]
  command = "npm run build"
  publish = "out"
  functions = "netlify/functions"

# Next.js static export handles routing, but we add a catch-all for SPA behavior
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# API routes via Netlify Functions
[[redirects]]
  from = "/api/printful/*"
  to = "/.netlify/functions/printful-:splat"
  status = 200

[[redirects]]
  from = "/api/printful-catalog"
  to = "/.netlify/functions/printful-catalog"
  status = 200

[[redirects]]
  from = "/api/save-selected-products"
  to = "/.netlify/functions/save-selected-products"
  status = 200
